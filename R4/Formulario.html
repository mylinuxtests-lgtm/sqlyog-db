<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" media="screen" />
    <title>Formulario</title>
  </head>

  <body>
    <form
      action="Formulario.php"
      method="post"
      enctype="multipart/form-data"
      autocomplete="off"
      class="needs-validation"
      novalidate
    >
      <div class="form-container">
        <h2>Por favor, contesta las siguientes preguntas</h2>
        <h2><span class="error">* Campo Obligatorio</span></h2>
      </div>
      <input
        type="hidden"
        id="fecha_respuesta"
        name="fecha_respuestas"
        value="0"
      />
      <div class="form-box">
        <label for="nombre">
          Nombre completo: <span class="error">*</span><br
        /></label>
        <input
          type="text"
          class="form-control"
          id="nombre"
          name="nombre"
          required
        /><br /><br />
      </div>
      <div class="form-box">
        <label for="sexo"> Sexo: <span class="error">*</span><br /></label>
        <br /><br />

        <label class="radio-label">
          <input type="radio" id="S1" name="sexo" value="Hombre" required />
          <span class="radio-text">Hombre</span> </label
        ><br />

        <label class="radio-label">
          <input type="radio" id="S2" name="sexo" value="Mujer" />
          <span class="radio-text">Mujer</span> </label
        ><br />

        <label class="radio-label">
          <input type="radio" id="S3" name="sexo" value="Otro" />
          <span class="radio-text">Otro</span> </label
        ><br />

        <label id="labelOtro" for="especifique" class="oculto">
          Especifique:
        </label>
        <input
          type="text"
          class="oculto"
          id="especifique"
          name="especifique"
        /><br />
      </div>
      <div class="form-box">
        <label for="age"> Edad: <span class="error">*</span><br /></label>
        <input
          type="number"
          id="age"
          name="age"
          min="1"
          max="99"
          required
        /><br /><br />
      </div>
      <div class="form-box">
        <label for="bday">
          Fecha de Nacimiento: <span class="error">*</span><br
        /></label>
        <input type="date" id="bday" name="bday" required /><br /><br />
      </div>
      <div class="form-box">
        <label for="country" class="col-sm-3 control-label"
          >Nacionalidad: <span class="error">*</span><br
        /></label>
        <div class="col-12">
          <select
            id="country"
            name="country"
            class="form-control"
            onchange="actualizarFormatoTelefono()"
          >
            <option value="Alemania">Alemania</option>
            <option value="Brazil">Brazil</option>
            <option value="Canada">Canada</option>
            <option value="China">China</option>
            <option value="Estados Unidos">Estados Unidos</option>
            <option value="India">India</option>
            <option value="Indonesia">Indonesia</option>
            <option value="Japon">Japon</option>
            <option value="Mexico" selected>Mexico</option>
            <option value="Rusia">Rusia</option>
          </select>
        </div>
      </div>
      <div class="form-box">
        <label for="photo">
          Sube tu foto: <span class="error">*</span><br />
        </label>
        <input
          type="file"
          id="photo"
          name="photo"
          accept="image/*"
          required
        /><br /><br />

        <label for="example"> Ejemplo </label> <br />
        <img
          src="uploads/documents/images.jpg"
          alt="Ejemplo"
          width="100"
          height="150"
        /><br /><br />
      </div>
      <div class="form-box">
        <label for="phone"> Teléfono: <span class="error">*</span><br /></label>
        <input
          type="tel"
          id="phone"
          name="phone"
          placeholder="000-00000000"
          pattern="[0-9]{1,3}-[0-9]{3,9}"
          maxlength="15"
          required
        /><br /><br />
        <small id="phoneHelp"
          >Debe seguir el siguiente formato: extensión-número (ej:
          000-1234567)</small
        ><br /><br />
      </div>
      <div class="form-box">
        <label for="correo"> Correo: <span class="error">*</span><br /></label>
        <input
          type="email"
          id="correo"
          name="correo"
          placeholder="ejemplo@hotmail.com"
          aria-label="correo"
          aria-describedby="basic-addon1"
          required
        /><br /><br />
      </div>
      <div class="form-box">
        <label for="domicilio">
          Domicilio: <span class="error">*</span><br />
        </label>
        <textarea
          id="domicilio"
          name="domicilio"
          rows="3"
          cols="30"
          required
        ></textarea
        ><br /><br />
      </div>
      <div class="form-box">
        <label for="list"> Listado <span class="error">*</span><br /> </label>
        <input
          type="file"
          id="list"
          name="list"
          accept=".txt"
          required
        /><br /><br />
        <small>Extensiones admitidas: .txt</small><br /><br />
      </div>
      <div class="form-box">
        <label for="excel">
          Archivo Excel <span class="error">*</span><br />
        </label>
        <input
          type="file"
          id="excel"
          name="excel"
          accept=".xlsx, .csv"
          required
        /><br /><br />
        <small>Extensiones admitidas: .csv, .xlsx</small><br /><br />
      </div>
      <div class="col-12">
        <div class="form-check">
          <label class="form-check-label" for="invalidCheck">
            Confirmas que estas de acuerdo con los terminos y condiciones.
            <span class="error">*</span>
            <input
              class="form-check-input"
              type="checkbox"
              value=""
              id="invalidCheck"
              required
            />
          </label>
          <small>Debes aceptar antes de finalizar </small>
        </div>
      </div>
      <input type="submit" value="Finalizar formulario" />
      <input type="reset" value="Borrar todos los datos" />
    </form>
    <br /><br />

    <script>
      const radioOtro = document.getElementById("S3");
      const campoEspecifique = document.getElementById("especifique");
      const labelEspecifique = document.getElementById("labelOtro");
      radioOtro.addEventListener("change", function () {
        if (radioOtro.checked) {
          campoEspecifique.classList.remove("oculto");
          labelEspecifique.classList.remove("oculto");
          campoEspecifique.setAttribute("required", "true");
        } else {
          campoEspecifique.classList.add("oculto");
          labelEspecifique.classList.add("oculto");
          campoEspecifique.removeAttribute("required");
        }
      });
      if (!radioOtro.checked) {
        campoEspecifique.classList.add("oculto");
        labelEspecifique.classList.add("oculto");
      }

      (function () {
        "use strict";

        const forms = document.querySelectorAll(".needs-validation");

        Array.from(forms).forEach(function (form) {
          form.addEventListener(
            "submit",
            function (event) {
              if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
              }

              form.classList.add("was-validated");
            },
            false
          );
        });
      })();
      const phoneFormats = {
        Alemania: {
          pattern: "[0-9]{2,4}-[0-9]{6,13}",
          placeholder: "49-12345678",
          example: "código de área-número (ej: 49-12345678)",
        },
        Brazil: {
          pattern: "[0-9]{2}-[0-9]{10}",
          placeholder: "55-912345678",
          example: "código de área-número (ej: 55-912345678)",
        },
        Canada: {
          pattern: "[0-9]{1,3}-[0-9]{10}",
          placeholder: "1-1234567",
          example: "código de área-número (ej: 1-1234567)",
        },
        China: {
          pattern: "[0-9]{2,3}-[0-9]{5,12}",
          placeholder: "86-12345678",
          example: "código de área-número (ej: 86-12345678)",
        },
        "Estados Unidos": {
          pattern: "[0-9]{1,3}-[0-9]{10}",
          placeholder: "1-5550123",
          example: "código de área-número (ej: 1-5550123)",
        },
        India: {
          pattern: "[0-9]{2,5}-[0-9]{7,10}",
          placeholder: "91-23456789",
          example: "código STD-número (ej: 91-23456789)",
        },
        Indonesia: {
          pattern: "[0-9]{2,4}-[0-9]{5,10}",
          placeholder: "62-12345678",
          example: "código de área-número (ej: 62-1234567)",
        },
        Japon: {
          pattern: "[0-9]{2,4}-[0-9]{5,13}",
          placeholder: "81-12345678",
          example: "código de área-número (ej: 81-12345678)",
        },
        Mexico: {
          pattern: "[0-9]{2,3}-[0-9]{10}",
          placeholder: "52-12345678",
          example: "lada-número (ej: 52-12345678)",
        },
        Rusia: {
          pattern: "[0-9]{3}-[0-9]{10}",
          placeholder: "7-1234567",
          example: "código-número (ej: 7-1234567)",
        },
      };

      // Sirve para utilizar el codigo de telefono segun el pais
      function actualizarFormatoTelefono() {
        const countrySelect = document.getElementById("country");
        const phoneInput = document.getElementById("phone");
        const phoneHelp = document.getElementById("phoneHelp");

        const selectedCountry = countrySelect.value;
        const format = phoneFormats[selectedCountry] || phoneFormats["Mexico"];

        phoneInput.pattern = format.pattern;
        phoneInput.placeholder = format.placeholder;
        phoneInput.value = "";

        phoneHelp.textContent = `Debe seguir el siguiente formato: ${format.example}`;
      }

      document
        .getElementById("country")
        .addEventListener("change", actualizarFormatoTelefono);

      document.addEventListener("DOMContentLoaded", function () {
        actualizarFormatoTelefono();
      });
    </script>
  </body>
</html>
